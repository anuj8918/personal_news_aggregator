{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\OneDrive\\\\Desktop\\\\news\\\\news-aggregator\\\\src\\\\components\\\\NewsAggregator.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport { FaSearch } from \"react-icons/fa\";\n\n// Type Definitions\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst fetchNews = async ({\n  queryKey\n}) => {\n  const [, category, searchTerm, currentPage] = queryKey;\n  const BACKEND_URL = process.env.REACT_APP_BACKEND_URL || \"http://localhost:5001\";\n  let url = `${BACKEND_URL}/api/news?category=${category}&page=${currentPage}`;\n  if (searchTerm) {\n    url += `&search=${searchTerm}`;\n  }\n  const response = await axios.get(url);\n  return response.data.articles || [];\n};\nconst NewsAggregator = () => {\n  _s();\n  const [category, setCategory] = useState(\"technology\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [showSearch, setShowSearch] = useState(false);\n  const searchInputRef = useRef(null);\n  const {\n    data: news = [],\n    isLoading,\n    error\n  } = useQuery({\n    queryKey: [\"news\", category, searchTerm, currentPage],\n    queryFn: fetchNews,\n    staleTime: 5 * 60 * 1000,\n    refetchOnWindowFocus: false\n  });\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (searchInputRef.current && !searchInputRef.current.contains(event.target)) {\n        setShowSearch(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"News Aggregator\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowSearch(prev => !prev),\n        children: /*#__PURE__*/_jsxDEV(FaSearch, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), showSearch && /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: searchInputRef,\n        type: \"text\",\n        placeholder: \"Search...\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value),\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this) : isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading news...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: news.map((article, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: article.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: article.source.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: article.url,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            children: \"Read more\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentPage(prev => Math.max(prev - 1, 1)),\n          disabled: currentPage === 1,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentPage(prev => prev + 1),\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(NewsAggregator, \"SxhMQuDm/oEjKMdY5KocDBOORS4=\", false, function () {\n  return [useQuery];\n});\n_c = NewsAggregator;\nexport default NewsAggregator;\nvar _c;\n$RefreshReg$(_c, \"NewsAggregator\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useQuery","axios","FaSearch","jsxDEV","_jsxDEV","Fragment","_Fragment","fetchNews","queryKey","category","searchTerm","currentPage","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","url","response","get","data","articles","NewsAggregator","_s","setCategory","setSearchTerm","setCurrentPage","showSearch","setShowSearch","searchInputRef","news","isLoading","error","queryFn","staleTime","refetchOnWindowFocus","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","prev","size","ref","type","placeholder","value","onChange","e","autoFocus","message","map","article","index","title","source","name","href","rel","Math","max","disabled","_c","$RefreshReg$"],"sources":["C:/Users/PC/OneDrive/Desktop/news/news-aggregator/src/components/NewsAggregator.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport axios from \"axios\";\r\nimport styled from \"styled-components\";\r\nimport { FaNewspaper, FaSearch } from \"react-icons/fa\";\r\n\r\n// Type Definitions\r\ninterface Article {\r\n  title: string;\r\n  source: { name: string };\r\n  url: string;\r\n}\r\n\r\ntype QueryKeyType = [string, string, string, number];\r\n\r\nconst fetchNews = async ({ queryKey }: { queryKey: QueryKeyType }): Promise<Article[]> => {\r\n  const [, category, searchTerm, currentPage] = queryKey;\r\n  const BACKEND_URL = process.env.REACT_APP_BACKEND_URL || \"http://localhost:5001\";\r\n\r\n  let url = `${BACKEND_URL}/api/news?category=${category}&page=${currentPage}`;\r\n  if (searchTerm) {\r\n    url += `&search=${searchTerm}`;\r\n  }\r\n\r\n  const response = await axios.get(url);\r\n  return response.data.articles || [];\r\n};\r\n\r\nconst NewsAggregator: React.FC = () => {\r\n  const [category, setCategory] = useState<string>(\"technology\");\r\n  const [searchTerm, setSearchTerm] = useState<string>(\"\");\r\n  const [currentPage, setCurrentPage] = useState<number>(1);\r\n  const [showSearch, setShowSearch] = useState<boolean>(false);\r\n  const searchInputRef = useRef<HTMLInputElement | null>(null);\r\n\r\n  const { data: news = [], isLoading, error } = useQuery<Article[], Error>({\r\n    queryKey: [\"news\", category, searchTerm, currentPage] as QueryKeyType,\r\n    queryFn: fetchNews,\r\n    staleTime: 5 * 60 * 1000,\r\n    refetchOnWindowFocus: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (searchInputRef.current && !searchInputRef.current.contains(event.target as Node)) {\r\n        setShowSearch(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h1>News Aggregator</h1>\r\n      <div>\r\n        <button onClick={() => setShowSearch((prev) => !prev)}>\r\n          <FaSearch size={20} />\r\n        </button>\r\n        {showSearch && (\r\n          <input\r\n            ref={searchInputRef}\r\n            type=\"text\"\r\n            placeholder=\"Search...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            autoFocus\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {error ? (\r\n        <p>{error.message}</p>\r\n      ) : isLoading ? (\r\n        <p>Loading news...</p>\r\n      ) : (\r\n        <>\r\n          <div>\r\n            {news.map((article: Article, index: number) => (\r\n              <div key={index}>\r\n                <h2>{article.title}</h2>\r\n                <p>{article.source.name}</p>\r\n                <a href={article.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                  Read more\r\n                </a>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div>\r\n            <button onClick={() => setCurrentPage((prev) => Math.max(prev - 1, 1))} disabled={currentPage === 1}>\r\n              Previous\r\n            </button>\r\n            <button onClick={() => setCurrentPage((prev) => prev + 1)}>Next</button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewsAggregator;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}